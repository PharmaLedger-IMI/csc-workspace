import{g as e}from"./p-87f0c668.js";import{e as t}from"./p-8ff37cfd.js";import{o as n}from"./p-5120ebde.js";window.cardinal=window.cardinal||{},window.cardinal.oldCustomTheme=window.cardinal.oldCustomTheme||{};const{oldCustomTheme:o}=window.cardinal;o.dependencies=o.dependencies||{},o.imports=o.imports||{},o.appTheme=o.appTheme||null;const{dependencies:s,imports:c}=o,i=/@import.*?["']([^"']+)["'].*?;/g;function a(e){return new Promise((n,o)=>{t(e).then(e=>{if(e.ok)return n(e.text());o({url:e.url,status:e.status,statusText:e.statusText})})})}window.cardinal=window.cardinal||{},window.cardinal.customTheme=window.cardinal.customTheme||{THEME:void 0,IMPORTS:{},EVENTS:{GET_THEME:"getThemeConfig",ADD_STYLE:"CustomTheme:add-style",REMOVE_STYLE:"CustomTheme:remove-style"}};const l=window.cardinal.customTheme;async function r(e){const o=e.tagName.toLowerCase(),s=e.mode||e.getAttribute("mode")||"default",c=`${window.basePath}themes/${l.THEME}/components/${o}/${o+("default"!==s?"."+s:"")+".css"}`;if(!l.IMPORTS[c]){const[e,n]=await async function(e){try{const n=await t(e);return[!0,await n.text()]}catch(e){return console.log(e),[!1]}}(c);if(!e)return;l.IMPORTS[c]=n}const i=l.IMPORTS[c];e.shadowRoot?(function(e){const t=e.host,n={true:{},false:{}};t.addEventListener(l.EVENTS.ADD_STYLE,o=>{o.preventDefault(),o.stopImmediatePropagation();const{data:{tag:s,slotted:c},callback:i}=o.detail;n[c][s]||(i(void 0,c?{target:t}:{target:e}),n[c][s]=!0)}),t.addEventListener(l.EVENTS.REMOVE_STYLE,e=>{e.preventDefault(),e.stopImmediatePropagation();const{data:{tag:t,slotted:o}}=e.detail;n[o][t]=!1})}(e.shadowRoot),n(e.shadowRoot,i)):(e.isSlotted=function(e){for(;e.parentElement;){if(e.parentElement.shadowRoot)return e.parentElement.shadowRoot.host===e.parentNode;e=e.parentElement}return!1}(e),e.dispatchEvent(new CustomEvent(l.EVENTS.ADD_STYLE,{bubbles:!0,cancelable:!0,composed:!0,detail:{data:{tag:o,slotted:e.isSlotted},callback:async(e,t)=>{if(e)return console.log(e);const{target:o}=t;n(o,i)}}})))}const d={VERSIONS:[{ref:function(){let t=e=>{let t={};e.addEventListener("styleExists",n=>{n.stopImmediatePropagation(),n.preventDefault();let o=n.detail.componentTag;(0,n.detail.callback)(void 0,t.hasOwnProperty(o),e),t[o]||(t[o]=!0)}),e.addEventListener("componentWasRemoved",e=>{let n=e.detail.componentTag;t[n]&&delete t[n]})};return t(document.querySelector("body")),n=>{const{componentWillLoad:l,disconnectedCallback:r}=n;n.componentWillLoad=function(){const n=e(this);if(n){let e=e=>{let o=n.tagName.toLowerCase(),r=t=>new Promise(n=>{let r=window.basePath+"themes/"+e+"/components/"+o+"/"+o+".css";s[r]||(s[r]=new Promise((e,t)=>{a(r).then(t=>{e(t)}).catch(t)})),s[r].then(e=>{var n,o;(n=r,o=e,c[n]||(c[n]=new Promise((e,t)=>{i.exec(o)?o.replace(i,(n,c)=>{s[c]||(s[c]=a(c)),s[c].then(t=>{e(o.replace(n,t))}).catch(t)}):e(o)})),c[n]).then(e=>{let n=document.createElement("style");n.innerHTML=e,t.append(n)})}).catch(e=>{console.log(`Request on resource ${e.url} ended with status: ${e.status} (${e.statusText})`)}).finally(()=>{n(l&&l.call(this))})});return n.shadowRoot?(t(n),r(n.shadowRoot)):new Promise(n.isConnected?e=>{let t=function e(t,n){return!!n&&(n.shadowRoot?t.parentNode===n.shadowRoot.host:e(n,n.parentElement))}(n,n.parentElement);n.isSlotted=t;let s=new CustomEvent("styleExists",{bubbles:!0,cancelable:!0,composed:!0,detail:{callback:(n,o,s)=>{n?console.log(n):o?e(l&&l.call(this)):(t||(s=s.shadowRoot),r(s).then(()=>{e()}))},componentTag:t?"SLOTTED:"+o:o}});n.dispatchEvent(s)}:e=>{e(l&&l.call(this))})};return o.appTheme?e(o.appTheme):new Promise(t=>{let s=new CustomEvent("getThemeConfig",{bubbles:!0,cancelable:!0,composed:!0,detail:(n,s)=>{if(n)return console.log(n);o.appTheme=s,e(o.appTheme).then(()=>{t()})}});n.dispatchEvent(s)})}return l&&l.call(this)},n.disconnectedCallback=function(){const t=e(this);let n=t.tagName.toLowerCase();t.isSlotted&&(n="SLOTTED:"+n);let o=new CustomEvent("componentWasRemoved",{bubbles:!0,cancelable:!0,composed:!0,detail:{componentTag:n}});t.dispatchEvent(o),r&&r.call(this)}}},version:"v1.0"},{ref:function(){return t=>{const{componentWillLoad:n,disconnectedCallback:o}=t;t.componentWillLoad=async function(){const t=e(this);return(t||t.isConnected)&&(l.THEME?await r(t):await async function(e,t){e.dispatchEvent(new CustomEvent(l.EVENTS.GET_THEME,{bubbles:!0,cancelable:!0,composed:!0,detail:async(n,o)=>{if(n)return console.log(n);l.THEME=o,await t(e)}}))}(t,r)),n&&n.call(this)},t.disconnectedCallback=async function(){const t=e(this);return t.dispatchEvent(new CustomEvent(l.EVENTS.REMOVE_STYLE,{bubbles:!0,cancelable:!0,composed:!0,detail:{data:{tag:t.tagName.toLowerCase(),slotted:!!t.isSlotted}}})),o&&o.call(this)}}},version:"v2.0"}]},u=window.customThemeVersion,m=([1,2].includes(u)?d.VERSIONS[u-1]:d.VERSIONS[0]).ref;export{m as C}